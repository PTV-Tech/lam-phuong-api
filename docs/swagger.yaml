basePath: /api
definitions:
  email.TestEmailRequest:
    properties:
      email:
        type: string
    required:
    - email
    type: object
  location.Location:
    properties:
      id:
        type: string
      name:
        type: string
      slug:
        type: string
    type: object
  location.LocationResponseWrapper:
    description: Response containing a single location
    properties:
      data:
        $ref: '#/definitions/location.Location'
      message:
        example: Location retrieved successfully
        type: string
      success:
        example: true
        type: boolean
    type: object
  location.LocationsResponseWrapper:
    description: Response containing a list of locations
    properties:
      data:
        items:
          $ref: '#/definitions/location.Location'
        type: array
      message:
        example: Locations retrieved successfully
        type: string
      success:
        example: true
        type: boolean
    type: object
  location.locationPayload:
    properties:
      name:
        description: Required
        type: string
      slug:
        description: Optional, will be generated from name if not provided
        type: string
    required:
    - name
    type: object
  response.ErrorInfo:
    description: Error information structure
    properties:
      code:
        example: VALIDATION_ERROR
        type: string
      details:
        additionalProperties: true
        type: object
      message:
        example: Invalid request data
        type: string
    type: object
  response.ErrorResponse:
    description: Standard error response structure
    properties:
      error:
        $ref: '#/definitions/response.ErrorInfo'
      message:
        type: string
      success:
        example: false
        type: boolean
    type: object
  response.Response:
    description: Standard API response structure
    properties:
      data: {}
      error:
        $ref: '#/definitions/response.ErrorInfo'
      message:
        example: Operation completed successfully
        type: string
      success:
        example: true
        type: boolean
    type: object
  user.LoginRequest:
    properties:
      email:
        type: string
      password:
        type: string
    required:
    - email
    - password
    type: object
  user.RegisterRequest:
    properties:
      email:
        type: string
      password:
        minLength: 6
        type: string
    required:
    - email
    - password
    type: object
  user.TokenResponse:
    properties:
      access_token:
        type: string
      expires_in:
        type: integer
      token_type:
        type: string
      user:
        $ref: '#/definitions/user.User'
    type: object
  user.TokenResponseWrapper:
    description: Response containing authentication token
    properties:
      data:
        $ref: '#/definitions/user.TokenResponse'
      message:
        example: Login successful
        type: string
      success:
        example: true
        type: boolean
    type: object
  user.User:
    properties:
      email:
        type: string
      id:
        type: string
      role:
        type: string
      status:
        description: '"pending", "active", or "disabled"'
        type: string
    type: object
  user.UserResponseWrapper:
    description: Response containing a single user
    properties:
      data:
        $ref: '#/definitions/user.User'
      message:
        example: User retrieved successfully
        type: string
      success:
        example: true
        type: boolean
    type: object
  user.UsersResponseWrapper:
    description: Response containing a list of users
    properties:
      data:
        items:
          $ref: '#/definitions/user.User'
        type: array
      message:
        example: Users retrieved successfully
        type: string
      success:
        example: true
        type: boolean
    type: object
  user.adminChangePasswordPayload:
    properties:
      new_password:
        minLength: 6
        type: string
      old_password:
        description: Optional for Super Admin, required for own password change
        type: string
    required:
    - new_password
    type: object
  user.changePasswordPayload:
    properties:
      new_password:
        minLength: 6
        type: string
      old_password:
        type: string
    required:
    - new_password
    - old_password
    type: object
  user.createUserPayload:
    properties:
      email:
        type: string
      password:
        minLength: 6
        type: string
      role:
        type: string
    required:
    - email
    - password
    type: object
  user.updateUserPayload:
    properties:
      password:
        description: Optional, min 6 characters if provided
        type: string
      role:
        description: Optional, must be valid role if provided
        type: string
      status:
        description: 'Optional, must be: pending, active, or disabled'
        type: string
    type: object
host: localhost:8080
info:
  contact:
    email: support@swagger.io
    name: API Support
    url: http://www.swagger.io/support
  description: API for managing locations
  license:
    name: Apache 2.0
    url: http://www.apache.org/licenses/LICENSE-2.0.html
  termsOfService: http://swagger.io/terms/
  title: Lam Phuong API
  version: "1.0"
paths:
  /auth/change-password:
    post:
      consumes:
      - application/json
      description: Change the authenticated user's own password. Requires old password
        and new password. Users can only change their own password.
      parameters:
      - description: Password change credentials
        in: body
        name: credentials
        required: true
        schema:
          $ref: '#/definitions/user.changePasswordPayload'
      produces:
      - application/json
      responses:
        "200":
          description: Password changed successfully
          schema:
            $ref: '#/definitions/response.Response'
        "400":
          description: Validation error
          schema:
            $ref: '#/definitions/response.ErrorResponse'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/response.ErrorResponse'
        "403":
          description: Invalid old password
          schema:
            $ref: '#/definitions/response.ErrorResponse'
        "500":
          description: Internal server error
          schema:
            $ref: '#/definitions/response.ErrorResponse'
      security:
      - BearerAuth: []
      summary: Change own password
      tags:
      - auth
  /auth/login:
    post:
      consumes:
      - application/json
      description: Authenticate user with email and password, returns JWT token. User
        must have verified their email address (status must be Active, not Pending).
      parameters:
      - description: Login credentials
        in: body
        name: credentials
        required: true
        schema:
          $ref: '#/definitions/user.LoginRequest'
      produces:
      - application/json
      responses:
        "200":
          description: Login successful
          schema:
            $ref: '#/definitions/user.TokenResponseWrapper'
        "400":
          description: Validation error
          schema:
            $ref: '#/definitions/response.ErrorResponse'
        "401":
          description: Invalid credentials
          schema:
            $ref: '#/definitions/response.ErrorResponse'
        "403":
          description: Email not verified or account disabled
          schema:
            $ref: '#/definitions/response.ErrorResponse'
      summary: User login
      tags:
      - auth
  /auth/register:
    post:
      consumes:
      - application/json
      description: Register a new user account with email and password. A verification
        email will be sent to the provided email address. User must verify their email
        before logging in.
      parameters:
      - description: Registration credentials
        in: body
        name: credentials
        required: true
        schema:
          $ref: '#/definitions/user.RegisterRequest'
      produces:
      - application/json
      responses:
        "201":
          description: User registered successfully. Verification email sent.
          schema:
            $ref: '#/definitions/user.UserResponseWrapper'
        "400":
          description: Validation error
          schema:
            $ref: '#/definitions/response.ErrorResponse'
        "409":
          description: Email already registered
          schema:
            $ref: '#/definitions/response.ErrorResponse'
        "500":
          description: Internal server error
          schema:
            $ref: '#/definitions/response.ErrorResponse'
      summary: User registration
      tags:
      - auth
  /auth/verify-email:
    get:
      consumes:
      - application/json
      description: Verify user's email address using verification token
      parameters:
      - description: Verification token
        in: query
        name: token
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: Email verified successfully
          schema:
            $ref: '#/definitions/response.Response'
        "400":
          description: Invalid or missing token
          schema:
            $ref: '#/definitions/response.ErrorResponse'
        "404":
          description: Token not found
          schema:
            $ref: '#/definitions/response.ErrorResponse'
        "500":
          description: Internal server error
          schema:
            $ref: '#/definitions/response.ErrorResponse'
      summary: Verify email address
      tags:
      - auth
  /email/test:
    post:
      consumes:
      - application/json
      description: Send a test email to the specified email address
      parameters:
      - description: Test email request
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/email.TestEmailRequest'
      produces:
      - application/json
      responses:
        "200":
          description: Test email sent successfully
          schema:
            $ref: '#/definitions/response.Response'
        "400":
          description: Validation error
          schema:
            $ref: '#/definitions/response.ErrorResponse'
        "500":
          description: Internal server error
          schema:
            $ref: '#/definitions/response.ErrorResponse'
      summary: Send test email
      tags:
      - email
  /locations:
    get:
      consumes:
      - application/json
      description: Get a list of all locations (requires authentication)
      produces:
      - application/json
      responses:
        "200":
          description: Locations retrieved successfully
          schema:
            $ref: '#/definitions/location.LocationsResponseWrapper'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/response.ErrorResponse'
      security:
      - BearerAuth: []
      summary: List all locations
      tags:
      - locations
    post:
      consumes:
      - application/json
      description: Create a new location with name and optional slug. If slug is not
        provided, it will be generated from the name. (requires authentication)
      parameters:
      - description: Location payload
        in: body
        name: location
        required: true
        schema:
          $ref: '#/definitions/location.locationPayload'
      produces:
      - application/json
      responses:
        "201":
          description: Location created successfully
          schema:
            $ref: '#/definitions/location.LocationResponseWrapper'
        "400":
          description: Validation error
          schema:
            $ref: '#/definitions/response.ErrorResponse'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/response.ErrorResponse'
        "500":
          description: Internal server error
          schema:
            $ref: '#/definitions/response.ErrorResponse'
      security:
      - BearerAuth: []
      summary: Create a new location
      tags:
      - locations
  /locations/{slug}:
    delete:
      consumes:
      - application/json
      description: Delete a location using its slug (requires authentication)
      parameters:
      - description: Location slug
        in: path
        name: slug
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: Location deleted successfully
          schema:
            $ref: '#/definitions/response.Response'
        "400":
          description: Validation error
          schema:
            $ref: '#/definitions/response.ErrorResponse'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/response.ErrorResponse'
        "404":
          description: Location not found
          schema:
            $ref: '#/definitions/response.ErrorResponse'
      security:
      - BearerAuth: []
      summary: Delete a location by slug
      tags:
      - locations
  /users:
    get:
      consumes:
      - application/json
      description: Get a list of all users (requires admin role)
      produces:
      - application/json
      responses:
        "200":
          description: Users retrieved successfully
          schema:
            $ref: '#/definitions/user.UsersResponseWrapper'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/response.ErrorResponse'
        "403":
          description: Forbidden
          schema:
            $ref: '#/definitions/response.ErrorResponse'
      security:
      - BearerAuth: []
      summary: List all users
      tags:
      - users
    post:
      consumes:
      - application/json
      description: Create a new user with email, password, and optional role (requires
        admin role). A verification email will be sent to the provided email address.
        User must verify their email before logging in.
      parameters:
      - description: User payload
        in: body
        name: user
        required: true
        schema:
          $ref: '#/definitions/user.createUserPayload'
      produces:
      - application/json
      responses:
        "201":
          description: User created successfully. Verification email sent.
          schema:
            $ref: '#/definitions/user.UserResponseWrapper'
        "400":
          description: Validation error
          schema:
            $ref: '#/definitions/response.ErrorResponse'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/response.ErrorResponse'
        "403":
          description: Forbidden
          schema:
            $ref: '#/definitions/response.ErrorResponse'
        "409":
          description: Email already registered
          schema:
            $ref: '#/definitions/response.ErrorResponse'
        "500":
          description: Internal server error
          schema:
            $ref: '#/definitions/response.ErrorResponse'
      security:
      - BearerAuth: []
      summary: Create a new user
      tags:
      - users
  /users/{id}:
    delete:
      consumes:
      - application/json
      description: Delete a user using its ID (requires admin role)
      parameters:
      - description: User ID
        in: path
        name: id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: User deleted successfully
          schema:
            $ref: '#/definitions/response.Response'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/response.ErrorResponse'
        "403":
          description: Forbidden
          schema:
            $ref: '#/definitions/response.ErrorResponse'
        "404":
          description: User not found
          schema:
            $ref: '#/definitions/response.ErrorResponse'
      security:
      - BearerAuth: []
      summary: Delete a user by ID
      tags:
      - users
    put:
      consumes:
      - application/json
      description: 'Update a user''s role, password, and/or status by ID (requires
        super admin role). Status can be: pending, active, or disabled.'
      parameters:
      - description: User ID
        in: path
        name: id
        required: true
        type: string
      - description: Update payload (role, password, and/or status)
        in: body
        name: user
        required: true
        schema:
          $ref: '#/definitions/user.updateUserPayload'
      produces:
      - application/json
      responses:
        "200":
          description: User updated successfully
          schema:
            $ref: '#/definitions/user.UserResponseWrapper'
        "400":
          description: Validation error
          schema:
            $ref: '#/definitions/response.ErrorResponse'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/response.ErrorResponse'
        "403":
          description: Forbidden
          schema:
            $ref: '#/definitions/response.ErrorResponse'
        "404":
          description: User not found
          schema:
            $ref: '#/definitions/response.ErrorResponse'
        "500":
          description: Internal server error
          schema:
            $ref: '#/definitions/response.ErrorResponse'
      security:
      - BearerAuth: []
      summary: Update user role, password, and status
      tags:
      - users
  /users/{id}/change-password:
    post:
      consumes:
      - application/json
      description: Change a user's password by ID. Super Admin can change password
        for any user. Other roles can only change their own password (by passing their
        own user ID).
      parameters:
      - description: User ID
        in: path
        name: id
        required: true
        type: string
      - description: Password change credentials
        in: body
        name: credentials
        required: true
        schema:
          $ref: '#/definitions/user.adminChangePasswordPayload'
      produces:
      - application/json
      responses:
        "200":
          description: Password changed successfully
          schema:
            $ref: '#/definitions/response.Response'
        "400":
          description: Validation error
          schema:
            $ref: '#/definitions/response.ErrorResponse'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/response.ErrorResponse'
        "403":
          description: Forbidden - can only change own password unless Super Admin
          schema:
            $ref: '#/definitions/response.ErrorResponse'
        "404":
          description: User not found
          schema:
            $ref: '#/definitions/response.ErrorResponse'
        "500":
          description: Internal server error
          schema:
            $ref: '#/definitions/response.ErrorResponse'
      security:
      - BearerAuth: []
      summary: Change user password (Super Admin only)
      tags:
      - users
  /users/{id}/toggle-status:
    post:
      consumes:
      - application/json
      description: Toggle a user's status between Active and Disabled. Only Admin
        or Super Admin can call this endpoint.
      parameters:
      - description: User ID
        in: path
        name: id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: User status toggled successfully
          schema:
            $ref: '#/definitions/user.UserResponseWrapper'
        "400":
          description: Validation error
          schema:
            $ref: '#/definitions/response.ErrorResponse'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/response.ErrorResponse'
        "403":
          description: Forbidden - Admin or Super Admin role required
          schema:
            $ref: '#/definitions/response.ErrorResponse'
        "404":
          description: User not found
          schema:
            $ref: '#/definitions/response.ErrorResponse'
        "500":
          description: Internal server error
          schema:
            $ref: '#/definitions/response.ErrorResponse'
      security:
      - BearerAuth: []
      summary: Toggle user status
      tags:
      - users
schemes:
- http
- https
securityDefinitions:
  BearerAuth:
    description: Type "Bearer" followed by a space and JWT token.
    in: header
    name: Authorization
    type: apiKey
swagger: "2.0"
